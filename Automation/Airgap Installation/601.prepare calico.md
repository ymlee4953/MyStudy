8. Set node Label
    
    8.1 Set node label for the advanced tasks

    - d
          # export CLUSTER_DOMAIN=a.k8s.demo.ymlee  

          cat <<EOF> ~/configurations/master-1/kubectl_label.sh
          kubectl label nodes master-1.${CLUSTER_DOMAIN} node-type=master
          kubectl label nodes master-2.${CLUSTER_DOMAIN} node-type=master
          kubectl label nodes master-3.${CLUSTER_DOMAIN} node-type=master
          kubectl label nodes ingress-1.${CLUSTER_DOMAIN} node-type=router
          kubectl label nodes ingress-2.${CLUSTER_DOMAIN} node-type=router
          kubectl label nodes ingress-3.${CLUSTER_DOMAIN} node-type=router
          kubectl label nodes worker-1.${CLUSTER_DOMAIN} node-type=app
          kubectl label nodes worker-2.${CLUSTER_DOMAIN} node-type=app
          kubectl label nodes worker-3.${CLUSTER_DOMAIN} node-type=app
          EOF
          
          cat ~/configurations/master-1/kubectl_label.sh
          chmod 755 ~/configurations/master-1/kubectl_label.sh


  -   
    - copy

          cat <<EOF> ~/ansible-playbooks/kubernetes/copy_kubectl_label_sh.yml
          - hosts: MASTER-1
            become: true
            tasks: 
              - name: Copy the kubectl_label.sh file master-1
                copy: 
                  src: ~/configurations/master-1/kubectl_label.sh
                  dest: ~/
                  mode: '0755'
              - name: Run kubectl_label.sh at master-1
                command: ./kubectl_label.sh
          EOF

          cat ~/ansible-playbooks/kubernetes/copy_kubectl_label_sh.yml

          ansible-playbook -i k8s-cluster-hosts ~/ansible-playbooks/kubernetes/copy_kubectl_label_sh.yml
